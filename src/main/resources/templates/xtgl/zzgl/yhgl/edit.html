<#assign ctx=req.contextPath />
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link href="${ctx}/plugins/layui/css/layui.css" rel="stylesheet" />
    <link href="${ctx}/plugins/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <style>
        /* layui重置 */
        .layui-form{width:530px;margin:10px auto 0;}
        .layui-form-item .layui-inline, .layui-form-item .layui-input-block{
            width:400px;
        }
        .layui-form-item .radio-box{border:1px solid #e6e6e6;}
        .layui-btn-container{width:512px;text-align:center;}
        /* 自定义 */
        div.icon-box{
            height: 36px;
            border:1px solid #e6e6e6;
            border-left:none;
            background-color: #fff;
            border-radius: 2px;
        }
        .icon-box .icon{
            width: 36px;
            height:36px;
            text-align: center;
            line-height: 36px;
            border-right:1px solid #e6e6e6;
            display: inline-block;
        }
        .icon-box .layui-inline-block{
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .icon-box .icon-input{
            display: inline-block;
            border:none;
            flex-grow: 1;
            padding: 0 10px;
        }
    </style>
</head>
<body>
<form class="layui-form layui-form-pane" lay-filter="edit" action="/menus/update" style="position: absolute;top: 50%;left:50%;margin:-210px 0 0 -265px ;">
    <div class="layui-form-item">
        <label class="layui-form-label" style="display: none">用户名称：</label>
        <div class="layui-inline" style="display: none">
            <input class="layui-input" type="hidden" name="username" value="${user.data[0].username}" placeholder="用户名称" lay-verify="required">
        </div>
        <label class="layui-form-label">用户昵称:</label>
        <div class="layui-inline">
            <input class="layui-input" type="text" name="nickname" value="${user.data[0].nickname}" placeholder="用户昵称" lay-verify="required">
        </div>
    </div>
    <!--<div class="layui-form-item">-->
        <!--<label class="layui-form-label">密码:</label>-->
        <!--<div class="layui-inline">-->
            <!--<input class="layui-input" type="password" name="password" id="password" value="" placeholder="密码" lay-verify="firstPwd">-->
        <!--</div>-->

        <!--<label class="layui-form-label">密码确认:</label>-->
        <!--<div class="layui-inline">-->
            <!--<input class="layui-input" type="password" name="sedPassword" id="passwordCheck" value="" placeholder="密码确认" lay-verify="sedPwd">-->
        <!--</div>-->
    <!--</div>-->
    <div class="layui-form-item">
        <label class="layui-form-label">备注:</label>
        <div class="layui-inline">
            <input class="layui-input" type="text" name="remark" value="${user.data[0].remark}" placeholder="备注">
        </div>
        <label class="layui-form-label">邮箱:</label>
        <div class="layui-inline">
            <input class="layui-input" type="text" name="email" value="${user.data[0].email}" placeholder="邮箱" lay-verify="email">
        </div>
        <label class="layui-form-label">电话:</label>
        <div class="layui-inline">
            <input class="layui-input" type="text" name="phone" value="${user.data[0].phone}" placeholder="电话" lay-verify="phone">
        </div>
    </div>

    <div class="layui-btn-container">
        <a class="layui-btn layui-btn-sm layui-btn-primary" lay-submit lay-filter="save">保存</a>
        <a id="cancel" class="layui-btn layui-btn-sm layui-bg-gray">取消</a>
    </div>
</form>
<script src="${ctx}/plugins/layui/layui.js"></script>
<script type="text/javascript">
    layui.use(['form','layer'],function(){
        var $=layui.jquery,treeSelect=layui.treeSelect,form=layui.form,layer=layui.layer;

        form.on('submit(save)', function(data){
            console.log(1212121211);
            console.log(data.field);
            var url = "${ctx}/xtgl/zzgl/yhgl/updateUser";
            var index;
            $.ajax({
                type: "POST",
                data: data.field,
                url: url,
                beforeSend: function () {
                    index = layer.load(1);
                },
                success: function (data) {
                    console.log(data);
                    layer.close(index);
                    if(data > 0){
                        var msg = "修改成功";
                        layer.msg(msg,{offset:['50%'],time: 1000},function(){
                            index = parent.layer.getFrameIndex(window.name);
                            parent.layer.close(index);
                        });
                    }else{
                        layer.msg("操作失败")
                    }
                },
                error: function (data) {
                    layer.msg("服务端异常");
                }
            });

            return false;
        });

        //取消
        $("#cancel").click(function(){
            var index = parent.layer.getFrameIndex(window.name);
            parent.layer.close(index);
        })

    })


</script>
</body>
</html>
